<div class="flex justify-end gap-2 mb-2">
    <p-button type="button" size="small" icon="pi pi-plus" label="{{'button.add'| transloco }}" (click)="addDialog()"></p-button>
    <p-button type="button" size="small" icon="pi pi-pencil" label="{{'button.edit'| transloco }}" severity="info" [disabled]="selectedRows.length != 1" (onClick)="editDialog()"></p-button>
    <p-button type="button" size="small" icon="pi pi-trash" label="{{'button.delete'| transloco }}" severity="danger" [disabled]="selectedRows.length < 1" (onClick)="deleteDialog()"></p-button>
</div>

<app-save-category-dialog
  [(visible)]="visibleSaveDialog"
  (save)="onSaveCategory($event)"
  (cancel)="onCancelAddDialog()"
  [category]="selectedCategoryToSave">
</app-save-category-dialog>

<app-delete-category-dialog
  [(visible)]="visibleDeleteDialog"
  (delete)="onDeleteCategories($event)"
  (cancel)="onCancelDeleteDialog()"
  [categories]="selectedCategoriesToDelete">
</app-delete-category-dialog>

<p-table #ref_datatable [columns]="columns" [value]="datasource" [scrollable]="false" showGridlines="true"
    selectionMode="multiple" [(selection)]="selectedRows" [rowHover]="true" [resizableColumns]="true"
    columnResizeMode="expand" 
    [showCurrentPageReport]="true" [currentPageReportTemplate]="pageReportString"
    [tableStyle]="{ 'min-width': '50rem' }" [lazy]="true" (onLazyLoad)="loadDatasource($event)" [loading]="loading"
    [paginator]="true" [rows]="rowsDefault" [rowsPerPageOptions]="rowsPerPageOptions" [totalRecords]="totalRecords"
    [pageLinks]="3" dataKey="categoryId">
    <ng-template #header>
        <tr>
            <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
            <th style="width:25%">{{ 'table.category.categoryId' | transloco }}</th>
            <th style="width:75%">{{ 'table.category.name' | transloco }}</th>
        </tr>
    </ng-template>
    <ng-template #body let-category>
        <tr>
            <td>
                <p-tableCheckbox [value]="category" />
            </td>
            <td>{{ category.categoryId }}</td>
            <td>{{ category.name }}</td>
        </tr>
    </ng-template>
</p-table>